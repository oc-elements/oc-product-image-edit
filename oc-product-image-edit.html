<link rel="import" href="../polymer/polymer.html">

<!--
`oc-product-image-edit`
Element to display product image editing controls on the Ordercloud platform

@demo demo/index.html 
-->

<dom-module id="oc-product-image-edit">
  <template>
    <style>
      :host {
        display: block;
      }

      .default-icon {
        color: gold;
      }

    </style>


    <section class="product-image-gallery">
      <template is="dom-repeat" items="[[images]]">
        <div class="single-image">
          <img src="[[item.thumbnail]]" alt="">
          <div class="image-actions" data-item$="[[item]]">
            <paper-icon-button id="delete" icon="delete" title="Delete Image"  on-tap="_actionHandler"></paper-icon-button>
            <paper-icon-button id="default" class="default-icon" icon="[[_isDefault(item.default)]]" title="Set as Default"  on-tap="_actionHandler"></paper-icon-button>
          </div>
        </div>
      </template>
    </section>



  </template>

  <script>
    Polymer({

      is: 'oc-product-image-edit',

      properties: {
        images : Array,
      },

      _isDefault : function(isDefault) {
        return (isDefault) ? "star" : "star-border";
      },

      _actionHandler: function(e) {
        var extraObj = JSON.parse(Polymer.dom(event).localTarget.parentElement.getAttribute('data-item')),
                action = e.target.getAttribute('id');
        this.fire(action, extraObj);
      },

    });
  </script>
</dom-module>
